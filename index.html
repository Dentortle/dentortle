<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dentordle Pathology</title>
<style>
body {
    font-family: 'Arial', sans-serif;
    background: linear-gradient(to right, #a8edea, #fed6e3);
    margin: 0;
    padding: 0;
    text-align: center;
}
header {
    padding: 20px;
}
header img {
    width: 120px;
}
h1 {
    font-size: 2.5em;
    margin: 10px 0;
    color: #333;
}
.mode-buttons {
    margin: 20px;
}
button {
    padding: 10px 20px;
    margin: 10px;
    font-size: 1em;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.3s ease;
    background: #ffb347;
    color: white;
}
button:hover {
    background: #ffcc70;
}
#clues {
    margin: 20px auto;
    max-width: 700px;
    background: rgba(255,255,255,0.8);
    padding: 20px;
    border-radius: 15px;
    text-align: left;
}
input[type="text"] {
    padding: 10px;
    font-size: 1em;
    width: 60%;
    border-radius: 10px;
    border: 1px solid #ccc;
}
footer {
    position: fixed;
    bottom: 10px;
    right: 20px;
    font-size: 0.9em;
    color: #555;
}
#nextBtn {
    display: none;
}
canvas {
    margin: 20px auto;
}
</style>
</head>
<body>

<header>
    <img src="https://i.imgur.com/0XhQj5K.png" alt="Dentist Turtle">
    <h1>Dentordle Pathology</h1>
</header>

<div class="mode-buttons">
    <button onclick="startDaily()">Daily Puzzle</button>
    <button onclick="startUnlimited()">Unlimited Practice</button>
</div>

<div id="clues"></div>

<div>
    <input type="text" id="answerInput" list="answerList" placeholder="Type your answer here">
    <datalist id="answerList">
        <!-- Paste all pathology options here -->
        <option value="Acinic Cell Adenocarcinoma">
        <option value="Acquired Melanocytic Nevus (Intramucosal)">
        <option value="Acromegaly">
        <option value="Actinic Cheilosis">
        <option value="Acute Atrophic Candidiasis (Antibiotic Sore Mouth)">
        <option value="Addison Disease (Chronic Adrenocortical Insufficiency)">
        <option value="Adenomatoid Odontogenic Tumor (AOT)">
        <option value="Adenoid Cystic Carcinoma">
        <option value="Amalgam Tattoo">
        <option value="Ameloblastoma (Conventional Solid/Multicystic)">
        <option value="Ameloblastoma (Unicystic Variant)">
        <option value="Ameloblastic Fibroma">
        <option value="Ameloblastic Fibro-Odontoma">
        <option value="Amelogenesis Imperfecta">
        <option value="Amyloidosis (Primary/Myeloma Associated)">
        <option value="Anemia (General)">
        <option value="Ankyloglossia">
        <option value="Ankylosis">
        <option value="Aneurysmal Bone Cyst">
        <option value="Angular Cheilitis">
        <option value="Aplastic Anemia">
        <option value="Attrition">
        <!-- Add the rest of your pathology options here -->
    </datalist>
    <button onclick="checkAnswer()">Submit</button>
</div>

<button id="nextBtn" onclick="nextCase()">Next Case</button>

<canvas id="scoreChart" width="400" height="200"></canvas>

<footer>Created by David Abbott</footer>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
// ---------- CASES ----------
const cases = [
    {answer:"Attrition",clues:[
        "An 82-year-old male presents complaining of generalized loss of incisal and occlusal tooth structure.",
        "Physical examination shows that both the tooth structure and existing restorations (e.g., amalgam) are evenly worn down.",
        "Radiographically, the slow loss of structure has allowed for dentin to be synthesized over the pulpal surface.",
        "Histology would show loss of tooth structure caused by tooth-to-tooth contact during occlusion and mastication.",
        "The patient reports a history of chronic grinding habits or premature contacts.",
        "The process is typically asymptomatic, and pulp exposure or sensitivity is rare due to the slow progression."
    ]},
    {answer:"Erosion",clues:[
        "Patient has smooth, cupped lesions on occlusal/incisal surfaces.",
        "History includes frequent acidic food or drink consumption.",
        "No significant wear on restorations.",
        "Histology shows loss of enamel without bacterial involvement.",
        "Surface is smooth and polished.",
        "Patient may report sensitivity."
    ]}
    // Add all your cases here
];

// ---------- VARIABLES ----------
let currentCase = null;
let currentClueIndex = 0;
let scores = JSON.parse(localStorage.getItem("dentordleScores") || "[]");
let dailyMode = false;

// ---------- CHART ----------
const ctx = document.getElementById('scoreChart').getContext('2d');
const scoreChart = new Chart(ctx, {
    type: 'bar',
    data: {
        labels: scores.map((_,i)=>`Round ${i+1}`),
        datasets: [{
            label: 'Clues to correct answer',
            data: scores,
            backgroundColor: 'rgba(255, 179, 71, 0.7)'
        }]
    },
    options: {
        scales: {
            y: {
                min: 0,
                max: 6,
                stepSize: 1
            }
        }
    }
});

// ---------- FUNCTIONS ----------
function startDaily() {
    dailyMode = true;
    const today = new Date().toISOString().slice(0,10);
    const hash = Array.from(today).reduce((a,b)=>a+b.charCodeAt(0),0);
    const index = hash % cases.length;
    startCase(cases[index]);
}

function startUnlimited() {
    dailyMode = false;
    nextCase();
}

function startCase(c) {
    currentCase = c;
    currentClueIndex = 0;
    showClues();
    document.getElementById("answerInput").value = "";
    document.getElementById("nextBtn").style.display = "none";
}

function showClues() {
    const cluesDiv = document.getElementById("clues");
    cluesDiv.innerHTML = "";
    for (let i=0;i<=currentClueIndex;i++){
        if(currentCase.clues[i])
            cluesDiv.innerHTML += `<p><strong>Clue ${i+1}:</strong> ${currentCase.clues[i]}</p>`;
    }
}

function checkAnswer() {
    const input = document.getElementById("answerInput").value.trim();
    if(input.toLowerCase() === currentCase.answer.toLowerCase()) {
        alert(`Correct! Answer: ${currentCase.answer}`);
        scores.push(currentClueIndex+1);
        updateChart();
        localStorage.setItem("dentordleScores",JSON.stringify(scores));
        document.getElementById("nextBtn").style.display = "inline-block";
    } else {
        currentClueIndex++;
        if(currentClueIndex >= currentCase.clues.length){
            alert(`Out of clues! Answer was: ${currentCase.answer}`);
            scores.push(6);
            updateChart();
            localStorage.setItem("dentordleScores",JSON.stringify(scores));
            document.getElementById("nextBtn").style.display = "inline-block";
        } else {
            showClues();
        }
    }
}

function nextCase() {
    if(dailyMode){
        alert("Daily Puzzle is only once per day.");
        return;
    }
    const randomIndex = Math.floor(Math.random() * cases.length);
    startCase(cases[randomIndex]);
}

function updateChart(){
    scoreChart.data.labels = scores.map((_,i)=>`Round ${i+1}`);
    scoreChart.data.datasets[0].data = scores;
    scoreChart.update();
}

// Show first clue immediately for interface readiness
document.addEventListener("DOMContentLoaded",()=>{
    document.getElementById("clues").innerHTML = "<p>Select a mode to start the puzzle!</p>";
});
</script>

</body>
</html>
