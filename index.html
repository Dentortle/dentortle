<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dentordle</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
  body { font-family:"Segoe UI", sans-serif; background: linear-gradient(135deg,#c8e6f5,#fff); color:#333; display:flex; flex-direction:column; align-items:center; min-height:100vh; margin:0; text-align:center; }
  header { margin-top:20px; }
  header img { max-width:150px; border-radius:20px; }
  h1 { margin:10px 0; font-size:2.5em; color:#0077b6; }
  .game-container { background:white; border-radius:16px; box-shadow:0 4px 12px rgba(0,0,0,0.15); padding:20px; width:90%; max-width:600px; margin-top:20px; display:flex; flex-direction:column; align-items:center; }
  #clues { text-align:center; margin-bottom:20px; }
  input, button, select { font-size:1em; padding:10px; margin:5px; border-radius:8px; border:1px solid #aaa; text-align:center; }
  button { background:#0077b6; color:white; cursor:pointer; }
  button:hover { background:#005f8a; }
  #result { font-weight:bold; margin:15px 0; }
  #chart-container { width:90%; max-width:600px; margin:30px auto; }
  footer { position:fixed; bottom:10px; right:15px; font-size:0.9em; color:#555; }
</style>
</head>
<body>
  <header>
    <img src="https://raw.githubusercontent.com/davidabbott33-hub/Dentordle/refs/heads/main/ChatGPT%20Image%20Oct%2017%2C%202025%2C%2002_02_17%20PM.png" alt="Dentist Turtle">
    <h1>Dentordle</h1>
  </header>

  <div class="game-container">
    <h3>Choose Mode</h3>
    <select id="mode">
      <option value="daily">Daily Puzzle</option>
      <option value="unlimited">Unlimited Practice</option>
    </select>
    <button id="startBtn">Start Game</button>

    <div id="game" style="display:none;">
      <div id="clues"></div>
      <input list="answerList" id="guessInput" placeholder="Type your diagnosis...">
      <datalist id="answerList"></datalist>
      <div>
        <button id="submitGuess">Submit Guess</button>
        <button id="nextCase" style="display:none;">Next Case</button>
      </div>
      <div id="result"></div>
    </div>
  </div>

  <div id="chart-container">
    <canvas id="scoreChart"></canvas>
  </div>

  <footer>Created by David Abbott</footer>

<script>
const cases = [
  { answer: "Attrition", clues: ["An 82-year-old male presents complaining of generalized loss of incisal and occlusal tooth structure.", "Physical examination shows that both the tooth structure and existing restorations (e.g., amalgam) are evenly worn down.", "Radiographically, the slow loss of structure has allowed for dentin to be synthesized over the pulpal surface.", "Histology would show loss of tooth structure caused by tooth-to-tooth contact during occlusion and mastication.", "The patient reports a history of chronic grinding habits or premature contacts.", "The process is typically asymptomatic, and pulp exposure or sensitivity is rare due to the slow progression."] },
  { answer: "Erosion", clues: ["The patient presents complaining of sensitivity, which is primarily located on the lingual surfaces of maxillary anterior teeth.", "Involvement of the posterior teeth is noted on the occlusal surfaces.", "Radiographs of posterior teeth show that the edges of metallic restorations are elevated above the level of the tooth structure.", "Histopathology reveals a loss of tooth structure caused by a chemical process, likely due to chronic regurgitation.", "An environmental factor, such as exposure to acid found in foods, drinks, or medications, is generally implicated.", "This form of tooth wear is classified as a pathological process."] }
  // Add more cases here, ensure each object is comma-separated and quotes are correct
];

const allAnswers = ["Attrition","Erosion"]; // keep this in sync with your cases, can expand later
const answerList = document.getElementById("answerList");
allAnswers.forEach(a => { const option = document.createElement("option"); option.value = a; answerList.appendChild(option); });

let currentCase, clueIndex, mode;
let scores = JSON.parse(localStorage.getItem("dentordleScores")||"[]");

const startBtn = document.getElementById("startBtn");
const submitGuess = document.getElementById("submitGuess");
const nextCaseBtn = document.getElementById("nextCase");
const resultDiv = document.getElementById("result");
const cluesDiv = document.getElementById("clues");
const guessInput = document.getElementById("guessInput");
const gameDiv = document.getElementById("game");
const modeSelect = document.getElementById("mode");

function getDailyCase() {
  const today = new Date();
  const daySeed = today.getFullYear()*10000 + (today.getMonth()+1)*100 + today.getDate();
  return cases[daySeed % cases.length];
}

function startGame() {
  mode = modeSelect.value;
  clueIndex = 0;
  resultDiv.innerHTML = "";
  guessInput.value = "";
  nextCaseBtn.style.display = "none";

  if(mode==="daily"){
    if(localStorage.getItem("dentordleDailyPlayed") === new Date().toDateString()){
      resultDiv.innerHTML = "‚úÖ You've already played today's case!";
      submitGuess.disabled = true;
      gameDiv.style.display = "block";
      return;
    }
    currentCase = getDailyCase();
  } else {
    currentCase = cases[Math.floor(Math.random()*cases.length)];
  }

  gameDiv.style.display = "block";
  submitGuess.disabled = false;
  displayClues();
}

function displayClues(){
  let html="";
  for(let i=0;i<=clueIndex;i++){
    if(currentCase.clues[i]) html+=`<p><b>Clue ${i+1}:</b> ${currentCase.clues[i]}</p>`;
  }
  cluesDiv.innerHTML=html;
}

function submitGuessFunc(){
  const guess = guessInput.value.trim();
  if(!guess) return;

  if(guess.toLowerCase()===currentCase.answer.toLowerCase()){
    resultDiv.innerHTML=`üéâ Correct! The diagnosis is: <b>${currentCase.answer}</b>`;
    scores.push(clueIndex+1);
    localStorage.setItem("dentordleScores", JSON.stringify(scores));
    submitGuess.disabled=true;
    nextCaseBtn.style.display = mode==="unlimited"?"inline-block":"none";
    if(mode==="daily") localStorage.setItem("dentordleDailyPlayed", new Date().toDateString());
    updateChart();
  } else {
    clueIndex++;
    if(clueIndex>=currentCase.clues.length){
      resultDiv.innerHTML=`‚ùå Out of clues! The correct diagnosis was: <b>${currentCase.answer}</b>`;
      scores.push(currentCase.clues.length);
      localStorage.setItem("dentordleScores", JSON.stringify(scores));
      submitGuess.disabled=true;
      nextCaseBtn.style.display = mode==="unlimited"?"inline-block":"none";
      if(mode==="daily") localStorage.setItem("dentordleDailyPlayed", new Date().toDateString());
      updateChart();
    } else displayClues();
  }
  guessInput.value="";
}

startBtn.addEventListener("click", startGame);
submitGuess.addEventListener("click", submitGuessFunc);
nextCaseBtn.addEventListener("click", startGame);

// ===== CHART =====
const ctx = document.getElementById("scoreChart").getContext("2d");
const chart = new Chart(ctx,{
  type:'line',
  data:{ labels:scores.map((_,i)=>i+1), datasets:[{label:'Guesses to Solve', data:scores, borderColor:'#0077b6', backgroundColor:'rgba(0,119,182,0.2)', tension:0.2 }]},
  options:{ responsive:true, scales:{ y:{min:0,max:6,ticks:{stepSize:1}}}}
});

function updateChart(){
  chart.data.labels = scores.map((_,i)=>i+1);
  chart.data.datasets[0].data = scores;
  chart.update();
}

updateChart();
</script>
</body>
</html>
