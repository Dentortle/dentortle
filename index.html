<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dentortle Pathology</title>
<style>
body {
    font-family: 'Arial', sans-serif;
    background-color: #f0f8ff;
    display: flex;
    flex-direction: column;
    align-items: center;
    margin: 0;
    padding: 0;
    min-height: 100vh;
    color: #004d40;
}
h1 {
    margin-top: 20px;
    text-align:center;
    font-size: 2.5em;
}
#headerImage {
    width: 150px;
    margin: 10px;
}
#clues {
    margin: 20px 0;
    max-width: 900px;
    text-align: left;
    background: #ffffff;
    padding: 25px;
    border-radius: 15px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    font-size: 1.1em;
}
#guessForm {
    display: flex;
    gap: 10px;
    margin-bottom: 20px;
    max-width: 900px;
    width: 100%;
    justify-content: center;
}
#guess {
    padding: 10px;
    font-size: 16px;
    flex: 1;
    border-radius: 5px;
    border: 1px solid #004d40;
}
button {
    padding: 10px 20px;
    font-size: 16px;
    cursor: pointer;
    border-radius: 5px;
    border: none;
    background-color: #004d40;
    color: #ffffff;
    transition: 0.3s;
}
button:hover { background-color: #00796b; }
#message { margin: 10px 0; font-weight: bold; max-width: 900px; text-align: center; }
#scoreBoard { margin-top: 30px; max-width: 900px; text-align: center; }
canvas { max-width: 100%; }
.hidden { display: none; }
</style>
</head>
<body>

<h1>Dentortle Pathology</h1>
<img src="https://i.imgur.com/4o9YkXU.png" alt="Dentist Turtle" id="headerImage">

<div id="clues">Loading today's case...</div>

<form id="guessForm">
    <input type="text" id="guess" placeholder="Type your answer here..." list="answersList" autocomplete="off">
    <datalist id="answersList"></datalist>
    <button type="submit">Submit</button>
</form>

<button id="nextCase" class="hidden">Next Case</button>

<div id="message"></div>

<div id="scoreBoard">
    <h2>Past Performance</h2>
    <canvas id="scoreChart" width="400" height="200"></canvas>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
// --- Answer choices ---
const answerChoices = [/* All 1–50 answer choices and more as before */ 
"Attrition","Erosion","Abrasion","Hyperdontia","Hypodontia","Microdontia","Gemination","Fusion",
"Talon Cusp","Concrescence","Dilaceration","Taurodontism","Dens Invaginatus","Hypercementosis",
"Ankylosis (Dental)","Amelogenesis Imperfecta","Dentin Dysplasia Type I (Radicular)",
"Turner Hypoplasia","Syphilitic Hypoplasia","Erythema Migrans","Ankyloglossia","White Sponge Nevus",
"Double Lip","Fordyce Granules","Leukoedema","Linea Alba","Macroglossia","Lingual Thyroid","Fissured Tongue",
"Hairy Tongue","Lingual Varicosities","Exostoses","Torus Mandibularis","Torus Palatinus","Nasolabial Cyst",
"Nasopalatine Duct Cyst","Dermoid Cyst","Oral Lymphoepithelial Cyst","Amalgam Tattoo","Epulis Fissuratum",
"Inflammatory Papillary Hyperplasia","Pyogenic Granuloma","Peripheral Giant Cell Granuloma",
"Peripheral Ossifying Fibroma","Congenital Epulis","Periapical Cyst","Residual Cyst","Internal Resorption",
"External Resorption","Condensing Osteitis","Dentin Dysplasia Type II (Coronal)","Primary Herpetic Gingivostomatitis (PHG)",
"Recurrent Herpes Simplex Infection (Herpes Labialis)","Varicella","Herpes Zoster","Infectious Mononucleosis",
"Oral Hairy Leukoplakia (OHL)","Kaposi Sarcoma","Papilloma (Squamous Cell Papilloma)","Verruca Vulgaris",
"Condyloma Acuminatum","Multifocal Epithelial Hyperplasia (Heck Disease)","Herpangina","Hand-Foot-and-Mouth Disease (HFMD)",
"Pseudomembranous Candidiasis","Chronic Hyperplastic Candidiasis","Acute Atrophic Candidiasis","Central Papillary Atrophy (Median Rhomboid Glossitis)",
"Angular Cheilitis","Denture Stomatitis (Chronic Atrophic Candidiasis)","Disseminated Histoplasmosis","Mucormycosis",
"Paget Disease (Osteitis Deformans)","Cherubism","Osteoma","Osteoblastoma","Osteosarcoma","Metastatic Tumors of the Jaw",
"Aneurysmal Bone Cyst (ABC)","Central Giant Cell Granuloma (CGCG)","Intrabony Vascular Malformation",
"Fibrous Dysplasia","Florid Cemento-Osseous Dysplasia (FCOD)","Ossifying Fibroma","Acromegaly",
"Hypothyroidism (Myxedema/Cretinism)","Thrombocytopenia","Leukemia","Hodgkin Lymphoma","Non-Hodgkin Lymphoma",
"Burkitt Lymphoma","Plasmacytoma (Extramedullary Myeloma)","Langerhans Cell Histiocytosis"];

// --- Cases (example 20 cases) ---
const cases = [ /* same 20 cases with clues and answers as in your list */ 
{answer:"Thrombocytopenia",clues:["Reduced circulating platelets","Bleeding tendency despite normal coag tests","Hemorrhages from small vessels","Petechiae and ecchymoses in oral mucosa","Spontaneous bleeding <10,000/µL","Decreased production or survival"]},
{answer:"Leukemia",clues:["Malignant WBC increase in bone marrow","Proliferates in marrow then overflows into blood","Depressed production of other blood cells","Gingival bleeding, petechiae, mucosal ulcers","Diffuse gingival enlargement","Diagnosis: Leukemia"]},
{answer:"Hodgkin Lymphoma",clues:["Lymphoma with Reed-Sternberg cells","Painless enlarging cervical node","Systemic: fever, night sweats, weight loss","EBV association","Histology: Reed-Sternberg 'owl eyes'","Diagnosis: Hodgkin Lymphoma"]},
{answer:"Non-Hodgkin Lymphoma",clues:["Extranodal lymphoma, oral soft tissue/bone","Diffuse erythematous/purplish swelling","May involve hard/soft palate or lateral tongue","Bone: ill-defined radiolucency, widened PDL","Palate ulceration may cause oral-antral communication","Diagnosis: Non-Hodgkin Lymphoma"]},
{answer:"Burkitt Lymphoma",clues:["Aggressive B-cell tumor in jaws of children","Highly EBV-associated","Maxilla then mandible","Aggressive bone destruction/tooth mobility","Radiographs: ragged radiolucency","Histology 'starry sky', Diagnosis: Burkitt Lymphoma"]},
{answer:"Plasmacytoma (Extramedullary Myeloma)",clues:["Solitary non-tender mucosal mass","Proliferation of single clone of plasma cells","Part of multiple myeloma spectrum","Non-tender","Histology: plasma cells","May progress to multiple myeloma"]},
{answer:"Langerhans Cell Histiocytosis",clues:["Proliferation of Langerhans cells, mimics periodontitis","Mostly children","Mucosal ulcers, osteolytic lesions","Teeth appear 'floating in space'","Posterior mandible","Diagnosis: Langerhans Cell Histiocytosis"]},
{answer:"Paget Disease (Osteitis Deformans)",clues:["Polyostotic bone disorder","Disorganized bone turnover","Older males, maxilla often involved","Radiographs: 'cotton wool'","Prone to headaches, 1% → osteosarcoma","Diagnosis: Paget Disease"]},
{answer:"Cherubism",clues:["Bilateral mandibular expansion in children","Ages 2-5","Maxilla may cause eyes to turn upward","Radiographs: multilocular radiolucencies","Tissue: giant cell granuloma with eosinophilic cuffing","Stabilizes after puberty"]},
{answer:"Osteoma",clues:["Benign dense bone tumor in paranasal sinuses","Composed of woven and lamellar bone","Hard exophytic mass","Multiple lesions → Gardner syndrome","Does not become malignant","Diagnosis: Osteoma"]},
{answer:"Osteoblastoma",clues:["Benign bone tumor, pain not relieved by NSAIDs","Arises from osteoblasts","Patients 10-30","Radiographs: radiolucent/mixed","Histology: woven bone with vascular stroma","Diagnosis: Osteoblastoma"]},
{answer:"Osteosarcoma",clues:["Malignant mesenchymal tumor producing osteoid","Aggressive jaw mass, tooth mobility, paresthesia","Third decade","Radiographs: mixed or radiolucent/opaque","PDL widening","Histology confirms osteoid, Diagnosis: Osteosarcoma"]},
{answer:"Metastatic Tumors of the Jaw",clues:["Common bone metastasis in older adults","Ill-defined radiolucency","Origin: breast, lung, thyroid, prostate, kidney","Pain, swelling, paresthesia","More common in mandible","Prognosis poor, often fatal <1 year"]},
{answer:"Aneurysmal Bone Cyst (ABC)",clues:["Intraosseous pseudocyst","Rapid swelling, tooth mobility/resorption","Radiographs: multilocular, cortical expansion","'Blood-soaked sponge' on surgery","Histology: blood-filled spaces","Diagnosis: Aneurysmal Bone Cyst"]},
{answer:"Central Giant Cell Granuloma (CGCG)",clues:["Non-neoplastic intraosseous lesion","Anterior mandible, may cross midline","Patients <30, F>M","Radiographs: well-defined radiolucency","Histology: multinucleated giant cells","Evaluate for hyperparathyroidism"]},
{answer:"Intrabony Vascular Malformation",clues:["Vascular structural anomaly in bone","10-20yo","Swelling, tooth mobility, bleeding","Bruit/pulsation on palpation","Radiographs: 'sunburst' trabeculae","Risk of fatal bleeding, needle aspiration essential"]},
{answer:"Fibrous Dysplasia",clues:["Normal trabecular bone replaced by fibrous tissue","Monostotic common","Radiographs: ground-glass","Margins blend into bone","Histology: curved trabeculae, no osteoblastic rimming","Polyostotic = McCune-Albright syndrome"]},
{answer:"Florid Cemento-Osseous Dysplasia (FCOD)",clues:["Multifocal fibro-osseous lesions","Black, middle-aged women","Teeth remain vital","Radiographs: radiolucent → mixed → radiopaque","Late lesions: cotton wool, hypovascular","Diagnosis: Florid Cemento-Osseous Dysplasia"]},
{answer:"Ossifying Fibroma",clues:["Well-defined solitary posterior mandible lesion","True neoplasm","Painless swelling","Radiographs: unilocular radiolucency","Histology: fibrous tissue with osteoid/bone/cementum","Diagnosis: Ossifying Fibroma"]},
{answer:"Acromegaly",clues:["Excess GH after epiphyseal closure","Hands, feet, face enlargement","Functional pituitary adenoma","Oral: mandibular prognathism, tooth spacing","Systemic: hypertension, CHF, diabetes","Diagnosis: Acromegaly"]},
{answer:"Hypothyroidism (Myxedema/Cretinism)",clues:["Decreased T3/T4","Sluggish, cold-intolerant","Cretinism in childhood, myxedema in adults","Macroglossia","Facial swelling, deep voice","Diagnosis: Hypothyroidism"]}
];

// --- State ---
let clueIndex = 0;
let todaysCase = cases[Math.floor(Math.random()*cases.length)]; // randomized case
let usedClues = 0;
const maxClues = 6;
const messageDiv = document.getElementById("message");
const cluesDiv = document.getElementById("clues");
const guessInput = document.getElementById("guess");
const form = document.getElementById("guessForm");
const nextButton = document.getElementById("nextCase");

// --- Setup datalist ---
const dl = document.getElementById("answersList");
answerChoices.forEach(ans=>{
    const opt = document.createElement("option");
    opt.value = ans;
    dl.appendChild(opt);
});

// --- Load previous scores ---
let scores = JSON.parse(localStorage.getItem("scores")) || [];

// --- Show clues ---
function showClues(){
    let html = "";
    for(let i=0;i<=clueIndex && i<maxClues;i++){
        html += `<p><b>Clue ${i+1}:</b> ${todaysCase.clues[i]}</p>`;
    }
    cluesDiv.innerHTML = html;
}

// --- Update graph ---
const ctx = document.getElementById('scoreChart').getContext('2d');
const scoreChart = new Chart(ctx,{
    type:'bar',
    data:{labels:scores.map((s,i)=>`Round ${i+1}`),
          datasets:[{label:'% Correct',data:scores.map(s=>Math.round((maxClues-s)/maxClues*100)),backgroundColor:'#004d40'}]},
    options:{scales:{y:{min:0,max:100,ticks:{stepSize:20}}}}
});
function updateChart(){
    scoreChart.data.labels = scores.map((s,i)=>`Round ${i+1}`);
    scoreChart.data.datasets[0].data = scores.map(s=>Math.round((maxClues-s)/maxClues*100));
    scoreChart.update();
}

// --- Initialize ---
showClues();
guessInput.focus();

// --- Form submit ---
form.addEventListener('submit',e=>{
    e.preventDefault();
    const guess = guessInput.value.trim();
    if(!guess) return;
    if(guess.toLowerCase() === todaysCase.answer.toLowerCase()){
        messageDiv.textContent = `Correct! The answer was "${todaysCase.answer}".`;
        scores.push(clueIndex);
        localStorage.setItem("scores",JSON.stringify(scores));
        updateChart();
        nextButton.classList.remove("hidden");
        form.classList.add("hidden");
        showClues();
    } else {
        clueIndex++;
        if(clueIndex>=maxClues){
            messageDiv.textContent = `Out of clues! The answer was "${todaysCase.answer}".`;
            scores.push(maxClues);
            localStorage.setItem("scores",JSON.stringify(scores));
            updateChart();
            nextButton.classList.remove("hidden");
            form.classList.add("hidden");
        } else {
            messageDiv.textContent = `Incorrect. Here's another clue.`;
            showClues();
        }
    }
    guessInput.value = "";
});

// --- Next Case ---
nextButton.addEventListener('click',()=>{
    clueIndex=0;
    usedClues=0;
    messageDiv.textContent="";
    form.classList.remove("hidden");
    nextButton.classList.add("hidden");
    todaysCase = cases[Math.floor(Math.random()*cases.length)]; // new random case
    showClues();
    guessInput.focus();
});
</script>

</body>
</html>
