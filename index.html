<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dentordle Pathology</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
  body {
    font-family: "Segoe UI", sans-serif;
    background: linear-gradient(135deg, #c8e6f5, #ffffff);
    color: #333;
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 100vh;
    margin: 0;
    text-align: center;
  }
  header {
    margin-top: 20px;
  }
  header img {
    max-width: 150px;
    border-radius: 20px;
  }
  h1 {
    margin: 10px 0;
    font-size: 2.5em;
    color: #0077b6;
  }
  .game-container {
    background: white;
    border-radius: 16px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    padding: 20px;
    width: 90%;
    max-width: 600px;
    margin-top: 20px;
  }
  #clues {
    text-align: center;
    margin-bottom: 20px;
  }
  input, button, select {
    font-size: 1em;
    padding: 10px;
    margin: 5px;
    border-radius: 8px;
    border: 1px solid #aaa;
  }
  button {
    background: #0077b6;
    color: white;
    cursor: pointer;
  }
  button:hover {
    background: #005f8a;
  }
  #result {
    font-weight: bold;
    margin: 15px 0;
  }
  #chart-container {
    width: 90%;
    max-width: 600px;
    margin: 30px auto;
  }
  footer {
    position: fixed;
    bottom: 10px;
    right: 15px;
    font-size: 0.9em;
    color: #555;
  }
</style>
</head>
<body>
  <header>
    <img src="https://raw.githubusercontent.com/davidabbott33-hub/Dentordle/refs/heads/main/ChatGPT%20Image%20Oct%2017%2C%202025%2C%2002_02_17%20PM.png" 
         alt="Dentist Turtle">
    <h1>Dentordle Pathology</h1>
  </header>

  <div class="game-container">
    <h3>Choose Mode</h3>
    <select id="mode">
      <option value="daily">Daily Puzzle</option>
      <option value="unlimited">Unlimited Practice</option>
    </select>
    <button id="startBtn">Start Game</button>

    <div id="game" style="display:none;">
      <div id="clues"></div>
      <input list="answerList" id="guessInput" placeholder="Type your diagnosis...">
      <datalist id="answerList">
        <option value="Acinic Cell Adenocarcinoma">
        <option value="Acquired Melanocytic Nevus (Intramucosal)">
        <option value="Acromegaly">
        <option value="Actinic Cheilosis">
        <option value="Acute Atrophic Candidiasis (Antibiotic Sore Mouth)">
        <option value="Attrition">
      </datalist>
      <div>
        <button id="submitGuess">Submit Guess</button>
        <button id="nextCase" style="display:none;">Next Case</button>
      </div>
      <div id="result"></div>
    </div>
  </div>

  <div id="chart-container">
    <canvas id="scoreChart"></canvas>
  </div>

  <footer>Created by David Abbott</footer>

  <script>
    const cases = [
      {answer:"Attrition",clues:[
        "An 82-year-old male presents complaining of generalized loss of incisal and occlusal tooth structure.",
        "Physical examination shows that both the tooth structure and existing restorations (e.g., amalgam) are evenly worn down.",
        "Radiographically, the slow loss of structure has allowed for dentin to be synthesized over the pulpal surface.",
        "Histology would show loss of tooth structure caused by tooth-to-tooth contact during occlusion and mastication.",
        "The patient reports a history of chronic grinding habits or premature contacts.",
        "The process is typically asymptomatic, and pulp exposure or sensitivity is rare due to the slow progression."
      ]}
      // Add more cases here following same pattern
    ];

    let currentCase, clueIndex, mode;
    let scores = JSON.parse(localStorage.getItem("dentordleScores") || "[]");

    const startBtn = document.getElementById("startBtn");
    const submitGuess = document.getElementById("submitGuess");
    const nextCaseBtn = document.getElementById("nextCase");
    const resultDiv = document.getElementById("result");
    const cluesDiv = document.getElementById("clues");
    const guessInput = document.getElementById("guessInput");
    const gameDiv = document.getElementById("game");
    const modeSelect = document.getElementById("mode");

    function getDailyCase() {
      const daySeed = Math.floor(Date.now() / (1000*60*60*24));
      return cases[daySeed % cases.length];
    }

    function getRandomCase() {
      return cases[Math.floor(Math.random()*cases.length)];
    }

    function startGame() {
      mode = modeSelect.value;
      currentCase = (mode === "daily") ? getDailyCase() : getRandomCase();
      clueIndex = 0;
      resultDiv.textContent = "";
      nextCaseBtn.style.display = "none";
      gameDiv.style.display = "block";
      cluesDiv.innerHTML = `<p><b>Clue 1:</b> ${currentCase.clues[0]}</p>`;
    }

    function submitGuessFunc() {
      const guess = guessInput.value.trim().toLowerCase();
      const answer = currentCase.answer.toLowerCase();
      if (!guess) return;

      if (guess === answer) {
        resultDiv.innerHTML = `<span style='color:green'>✅ Correct! The answer was <b>${currentCase.answer}</b> (${clueIndex+1}/6 clues)</span>`;
        scores.push(clueIndex+1);
        localStorage.setItem("dentordleScores", JSON.stringify(scores));
        updateChart();
        nextCaseBtn.style.display = "inline-block";
        submitGuess.disabled = true;
      } else {
        clueIndex++;
        if (clueIndex >= 6) {
          resultDiv.innerHTML = `<span style='color:red'>❌ Out of clues! The answer was <b>${currentCase.answer}</b>.</span>`;
          scores.push(6);
          localStorage.setItem("dentordleScores", JSON.stringify(scores));
          updateChart();
          nextCaseBtn.style.display = "inline-block";
          submitGuess.disabled = true;
        } else {
          let html = "";
          for (let i=0;i<=clueIndex;i++) {
            html += `<p><b>Clue ${i+1}:</b> ${currentCase.clues[i]}</p>`;
          }
          cluesDiv.innerHTML = html;
        }
      }
      guessInput.value = "";
    }

    function nextCase() {
      submitGuess.disabled = false;
      resultDiv.textContent = "";
      if (mode === "daily") {
        resultDiv.innerHTML = "✅ You've already played today's case!";
      } else {
        currentCase = getRandomCase();
        clueIndex = 0;
        cluesDiv.innerHTML = `<p><b>Clue 1:</b> ${currentCase.clues[0]}</p>`;
      }
      nextCaseBtn.style.display = "none";
    }

    let chart;
    function updateChart() {
      const ctx = document.getElementById('scoreChart').getContext('2d');
      if (chart) chart.destroy();
      chart = new Chart(ctx, {
        type: 'bar',
        data: {
          labels: scores.map((_,i)=>i+1),
          datasets: [{
            label: 'Clues Used',
            data: scores,
            borderWidth: 1
          }]
        },
        options: {
          scales: {
            y: {beginAtZero:true, max:6}
          }
        }
      });
    }

    startBtn.onclick = startGame;
    submitGuess.onclick = submitGuessFunc;
    nextCaseBtn.onclick = nextCase;
    updateChart();
  </script>
</body>
</html>
